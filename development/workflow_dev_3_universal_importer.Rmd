---
title: "Enrichment Workflow Dev 3 Universal Importer"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Main Goals:
  - update acceptance test for enrichment workflow (done)
  - write code that generates "complete.protein.summarized.experiment" from quant analysis workflows.
  - write better/abstracted runner to complete enrichment workflow using complete.protein.summarized
  experiment using mass expression framework
  
  
comparison.protein.summarized.experiment:
- coldata for statistics
- assay is log2int(Norm) statistics
- rowData is from protein viz
- need to filter assay by valid rows in protein viz
  
  
```{r pass conditions through}



```



# Test Code

```{r Test LFQ}

experiment_home = "/home/joseph/experiments/her_data_gsea_test"
gmtFolder = "/home/joseph/experiments/BKG_gmt_output_human/9606"
debugonce(writeEnrichmentJSON)
results = runEnrichmentWorkflowStep(experiment_home, 
                                   gmtFolder = gmtFolder,
                                   outputFolder = file.path(experiment_home,"camera"),
                                   by = "Protein",
                                   method = "camera")
```

```{r Test TMT}

experiment_home = "/home/joseph/experiments/tj_v2_test/"
gmtFolder = "/home/joseph/experiments/BKG_gmt_output_mouse/"

results = runEnrichmentWorkflowStep(experiment_home, 
                                   gmtFolder = gmtFolder,
                                   outputFolder = file.path(experiment_home,"camera"),
                                   by = "Protein",
                                   method = "camera")
```

```{r Test FAIMS}

experiment_home = "/home/joseph/experiments/faims_gsea_test"
gmtFolder = "/home/joseph/experiments/BKG_gmt_output_human/9606"

results = runEnrichmentWorkflowStep(experiment_home, 
                                   gmtFolder = gmtFolder,
                                   outputFolder = file.path(experiment_home,"camera"),
                                   by = "Protein",
                                   method = "camera")
```

```{r FAIMS test 2}

experiment_home = "/home/joseph/experiments/faims_gsea_test_2"
gmtFolder = "/home/joseph/experiments/BKG_gmt_output_human/9606"

results = runEnrichmentWorkflowStep(experiment_home, 
                                   gmtFolder = gmtFolder,
                                   outputFolder = file.path(experiment_home,"camera"),
                                   by = "Protein",
                                   method = "camera")


```

```{r Test Universal Importer}

experiment_home = "/home/joseph/github_repos/MassExpression/dev/universal_importer_test/"
gmtFolder = "/home/joseph/experiments/BKG_gmt_output_mouse/"
results = runEnrichmentWorkflowStep(experiment_home, 
                                   gmtFolder = gmtFolder,
                                   outputFolder = file.path(experiment_home,"camera"),
                                   by = "Protein",
                                   method = "camera")


```

